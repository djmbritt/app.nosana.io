nosana:
  description: Nosana-Node Pipeline

global:
  image: registry.hub.docker.com/library/node:lts

  trigger:
    branch:
      - all
      
  environment:
    NODE_ENV: ipfs
    PINATA_JWT_KEY:
        type: nosana/secret
        endpoint: https://secrets.k8s.prd.nos.ci
        value: PINATA_JWT_KEY

jobs:
  - name: Build and upload to IPFS
    commands:
      - npm ci
      - npm run generate:ipfs
      - npm run ipfs
